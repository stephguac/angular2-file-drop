!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("fileapi")):"function"==typeof define&&define.amd?define(["exports","@angular/core","fileapi"],t):t(e["bergben-angular2-file-drop"]=e["bergben-angular2-file-drop"]||{},e.ng.core)}(this,function(e,t){"use strict";var r=function(e,t,r,n){var i,o=arguments.length,p=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(p=(o<3?i(p):o>3?i(t,r,p):i(t,r))||p);return o>3&&p&&Object.defineProperty(t,r,p),p},n=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=function(){function e(e){this.fileOver=new t.EventEmitter,this.onFileDrop=new t.EventEmitter,this.element=e}return e.prototype.onDragOver=function(e){var t=this.getDataTransfer(e);this.haveFiles(t.types)&&(t.dropEffect="copy",this.preventAndStop(e),this.emitFileOver(!0))},e.prototype.onDragLeave=function(e){e.currentTarget!==this.element[0]&&(this.preventAndStop(e),this.emitFileOver(!1))},e.prototype.onDrop=function(e){var t=this.getDataTransfer(e);if(t){this.preventAndStop(e),this.emitFileOver(!1);for(var r=0;r<t.files.length;r++)this.readFile(t.files[r])}},e.prototype.readFile=function(e){var t=this,r=this.pickStrategy();if(r){var n="readAs"+r;FileAPI[n](e,function(r){if("load"===r.type)t.emitFileDrop(r.result);else if("error"===r.type)throw new Error("Couldn't read file '"+e.name+"'")})}else this.emitFileDrop(e)},e.prototype.emitFileOver=function(e){this.fileOver.emit(e)},e.prototype.emitFileDrop=function(e){this.onFileDrop.emit(e)},e.prototype.pickStrategy=function(){if(this.options)return this.hasStrategy(this.options.readAs)?this.options.readAs:void 0},e.prototype.hasStrategy=function(e){return-1!==["DataURL","BinaryString","ArrayBuffer","Text"].indexOf(e)},e.prototype.getDataTransfer=function(e){return e.dataTransfer?e.dataTransfer:e.originalEvent.dataTransfer},e.prototype.preventAndStop=function(e){e.preventDefault(),e.stopPropagation()},e.prototype.haveFiles=function(e){return!!e&&(e.indexOf?-1!==e.indexOf("Files"):!!e.contains&&e.contains("Files"))},r([t.Output(),n("design:type",t.EventEmitter)],e.prototype,"fileOver",void 0),r([t.Output(),n("design:type",t.EventEmitter)],e.prototype,"onFileDrop",void 0),r([t.Input(),n("design:type",Object)],e.prototype,"options",void 0),r([t.HostListener("dragover",["$event"]),n("design:type",Function),n("design:paramtypes",[Object]),n("design:returntype",void 0)],e.prototype,"onDragOver",null),r([t.HostListener("dragleave",["$event"]),n("design:type",Function),n("design:paramtypes",[Object]),n("design:returntype",void 0)],e.prototype,"onDragLeave",null),r([t.HostListener("drop",["$event"]),n("design:type",Function),n("design:paramtypes",[Object]),n("design:returntype",void 0)],e.prototype,"onDrop",null),e=r([t.Directive({selector:"[fileDrop]"}),n("design:paramtypes",[t.ElementRef])],e)}(),o=function(e,t,r,n){var i,o=arguments.length,p=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(p=(o<3?i(p):o>3?i(t,r,p):i(t,r))||p);return o>3&&p&&Object.defineProperty(t,r,p),p},p=function(){function e(){}return e=o([t.NgModule({declarations:[i],exports:[i]})],e)}();e.FileDropModule=p,e.FileDropDirective=i,Object.defineProperty(e,"__esModule",{value:!0})});